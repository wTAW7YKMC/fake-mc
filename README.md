# 沙盒游戏 (Sandbox Game)

这是一个类似Minecraft的简单沙盒游戏，使用HTML5 Canvas和JavaScript构建。

## 功能特性

- 随机生成的世界地图，包含草地、泥土、石头、树木和水池
- 玩家可以通过WASD键或方向键自由移动
- 鼠标左键挖掘方块，右键放置方块
- 物品栏系统，可以收集和放置不同类型的方块
- 数字键1-4切换不同的方块类型
- 玩家动画效果和物理移动系统
- 挖掘进度条和粒子效果
- 动态背景和光照效果
- 背景音乐和音效

## 如何运行游戏

### 方法1：使用Python启动本地服务器（推荐）
1. 确保您已安装Python 3.x
2. 双击项目根目录下的`start_server.bat`文件
3. 或者在命令行中运行以下命令：
   ```bash
   python -m http.server 8000
   ```
4. 在浏览器中访问 http://localhost:8000

### 方法2：使用VS Code Live Server扩展
1. 在VS Code中打开项目文件夹
2. 右键点击`index.html`文件
3. 选择"Open with Live Server"

### 方法3：使用其他本地服务器工具
您可以使用XAMPP、WAMP或其他本地服务器工具来运行游戏。

## 如何游玩

1. 使用WASD键或方向键控制玩家移动
2. 鼠标左键点击方块进行挖掘（带有进度条）
3. 鼠标右键点击空位置放置方块
4. 使用数字键1-9在不同的方块类型之间切换
5. 享受改进的物理移动系统和视觉效果

## 技术实现

### 核心渲染系统
- **3D渲染管线**：基于透视投影（FOV 70°±5°），支持深度测试和模板测试
- **体素网格优化**：六面网格生成，背面剔除和相邻面合并技术
- **纹理与材质**：纹理图集（256x256/512x512），支持多级纹理过滤
- **光照系统**：环境光+定向光，光照传播算法（0-15级光照等级）
- **视觉增强**：动态天空盒、雾效、实体渲染（Billboard和骨骼动画）

### 世界生成系统
- **地形生成**：基于Perlin噪声的多层噪声叠加算法
- **生物群系**：5种基础生物群系（草原、森林、沙漠、山脉、海洋）
- **结构生成**：L系统生成树木，噪声阈值生成洞穴
- **区块管理**：以玩家为中心的径向加载，16x256x16区块尺寸

### 物理与碰撞系统
- **碰撞检测**：AABB碰撞盒（玩家0.6x1.8x0.6米，实体自定义尺寸）
- **物理规则**：重力9.8m/s²，移动物理（步行4.317m/s，奔跑5.612m/s）
- **特殊效果**：液体浮力，方块掉落物理

### 玩家控制器
- **视角控制**：鼠标控制偏航角和俯仰角，相机位置优化
- **交互系统**：射线检测（5米距离），方块破坏和放置机制
- **物品系统**：9格快捷栏，背包系统，手持物品渲染

### UI与反馈系统
- **核心UI**：十字准星，状态HUD（生命值、饥饿值、经验条）
- **视觉反馈**：方块破坏动画，受伤反馈，跳跃/落地效果

### 性能优化
- **渲染优化**：视锥体剔除，LOD细节层次，纹理压缩
- **逻辑优化**：区块异步生成，实体休眠机制

详细技术规格请参阅 [技术规格文档](TECHNICAL_SPECIFICATION.md)

## 浏览器兼容性

该项目在现代浏览器中运行良好，包括Chrome、Firefox、Safari和Edge。

## 许可证

本项目为开源项目，可用于学习和参考。